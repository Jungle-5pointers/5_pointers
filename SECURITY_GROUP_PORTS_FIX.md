# 🔧 보안 그룹 포트 설정 가이드

## 🚨 문제: 애플리케이션 포트가 보안 그룹에 없음

### 현재 상황
- RDS 포트 3306만 설정됨
- 애플리케이션 포트들이 차단되어 있음
- 서버는 실행 중이지만 외부 접근 불가

## 🔧 각 서버별 필요한 포트 설정

### 1. 백엔드 서버 (3.39.235.190)
**보안 그룹에 추가해야 할 포트:**
```
포트 3001 (HTTP)
- 유형: 사용자 지정 TCP
- 포트 범위: 3001
- 소스: 0.0.0.0/0
- 설명: Backend API Port
```

### 2. 프론트엔드 서버 (3.35.227.214) 
**이미 작동 중 - 포트 80 설정됨**
```
포트 80 (HTTP) ✅
- 유형: HTTP
- 포트 범위: 80
- 소스: 0.0.0.0/0
```

### 3. 서브도메인 서버 (13.125.227.27)
**포트 3002 확인 필요:**
```
포트 3002 (HTTP)
- 유형: 사용자 지정 TCP
- 포트 범위: 3002
- 소스: 0.0.0.0/0
- 설명: Subdomain Server Port
```

### 4. WebSocket 서버 (43.203.138.8)
**포트 3003 확인 필요:**
```
포트 3003 (WebSocket)
- 유형: 사용자 지정 TCP
- 포트 범위: 3003
- 소스: 0.0.0.0/0
- 설명: WebSocket Server Port
```

## 📋 AWS 콘솔 설정 단계

### 1단계: EC2 보안 그룹 접근
1. AWS 콘솔 → EC2 → 보안 그룹
2. 각 서버의 보안 그룹 찾기

### 2단계: 인바운드 규칙 추가
각 서버별로:
1. 보안 그룹 선택
2. 인바운드 규칙 → 규칙 편집
3. 규칙 추가 → 위 포트 설정
4. 규칙 저장

### 3단계: 즉시 테스트
```bash
# 백엔드 (가장 중요!)
curl http://3.39.235.190:3001/health

# 서브도메인
curl http://13.125.227.27:3002

# WebSocket
curl http://43.203.138.8:3003
```

## 🎯 우선순위

### 🔥 긴급 (지금 즉시)
1. **백엔드 포트 3001** - 로그인/회원가입 복구

### ⚠️ 중요 (확인 필요)
2. 서브도메인 포트 3002
3. WebSocket 포트 3003

## 🔍 확인 방법

### 설정 전:
```bash
curl http://3.39.235.190:3001/health
# 결과: Connection refused
```

### 설정 후:
```bash
curl http://3.39.235.190:3001/health
# 예상 결과: {"status":"OK","timestamp":"..."}
```

## 🚨 보안 주의사항

### 임시 설정 (개발용):
- 소스: 0.0.0.0/0 (모든 IP 허용)

### 프로덕션 권장:
- 소스: 특정 IP 대역만 허용
- 필요한 포트만 최소한으로 열기

---

**백엔드 포트 3001만 열어도 로그인/회원가입이 즉시 작동할 것입니다!**
